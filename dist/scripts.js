!function(t){var e={};function r(n){if(e[n])return e[n].exports;var l=e[n]={i:n,l:!1,exports:{}};return t[n].call(l.exports,l,l.exports,r),l.l=!0,l.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var l in t)r.d(n,l,function(e){return t[e]}.bind(null,l));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s=2)}([function(t,e,r){(function(t){var r;r=function(){var t=null,e={};i("monochrome",null,[[0,0],[100,0]]),i("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),i("orange",[19,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),i("yellow",[47,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),i("green",[63,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),i("blue",[179,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),i("purple",[258,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),i("pink",[283,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]);var r=[],n=function(i){if(void 0!==(i=i||{}).seed&&null!==i.seed&&i.seed===parseInt(i.seed,10))t=i.seed;else if("string"==typeof i.seed)t=function(t){for(var e=0,r=0;r!==t.length&&!(e>=Number.MAX_SAFE_INTEGER);r++)e+=t.charCodeAt(r);return e}(i.seed);else{if(void 0!==i.seed&&null!==i.seed)throw new TypeError("The seed value must be an integer or string");t=null}var u,f;if(null!==i.count&&void 0!==i.count){for(var d=i.count,c=[],g=0;g<i.count;g++)r.push(!1);for(i.count=null;d>c.length;)t&&i.seed&&(i.seed+=1),c.push(n(i));return i.count=d,c}return function(t,e){switch(e.format){case"hsvArray":return t;case"hslArray":return h(t);case"hsl":var r=h(t);return"hsl("+r[0]+", "+r[1]+"%, "+r[2]+"%)";case"hsla":var n=h(t),l=e.alpha||Math.random();return"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+l+")";case"rgbArray":return s(t);case"rgb":return"rgb("+s(t).join(", ")+")";case"rgba":var a=s(t);return l=e.alpha||Math.random(),"rgba("+a.join(", ")+", "+l+")";default:return function(t){var e=s(t);function r(t){var e=t.toString(16);return 1==e.length?"0"+e:e}return"#"+r(e[0])+r(e[1])+r(e[2])}(t)}}([u=function(t){if(r.length>0){var n=a(f=function(t){if(isNaN(t)){if("string"==typeof t)if(e[t]){var r=e[t];if(r.hueRange)return r.hueRange}else if(t.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i))return l(o(t)[0]).hueRange}else{var n=parseInt(t);if(n<360&&n>0)return l(t).hueRange}return[0,360]}(t.hue)),i=(f[1]-f[0])/r.length,s=parseInt((n-f[0])/i);!0===r[s]?s=(s+2)%r.length:r[s]=!0;var h=(f[0]+s*i)%359,u=(f[0]+(s+1)*i)%359;return(n=a(f=[h,u]))<0&&(n=360+n),n}var f=function(t){if("number"==typeof parseInt(t)){var r=parseInt(t);if(r<360&&r>0)return[r,r]}if("string"==typeof t)if(e[t]){var n=e[t];if(n.hueRange)return n.hueRange}else if(t.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var l=o(t)[0];return[l,l]}return[0,360]}(t.hue);return(n=a(f))<0&&(n=360+n),n}(i),f=function(t,e){if("monochrome"===e.hue)return 0;if("random"===e.luminosity)return a([0,100]);var r=function(t){return l(t).saturationRange}(t),n=r[0],i=r[1];switch(e.luminosity){case"bright":n=55;break;case"dark":n=i-10;break;case"light":i=55}return a([n,i])}(u,i),function(t,e,r){var n=function(t,e){for(var r=l(t).lowerBounds,n=0;n<r.length-1;n++){var a=r[n][0],i=r[n][1],s=r[n+1][0],o=r[n+1][1];if(e>=a&&e<=s){var h=(o-i)/(s-a);return h*e+(i-h*a)}}return 0}(t,e),i=100;switch(r.luminosity){case"dark":i=n+20;break;case"light":n=(i+n)/2;break;case"random":n=0,i=100}return a([n,i])}(u,f,i)],i)};function l(t){for(var r in t>=334&&t<=360&&(t-=360),e){var n=e[r];if(n.hueRange&&t>=n.hueRange[0]&&t<=n.hueRange[1])return e[r]}return"Color not found"}function a(e){if(null===t){var r=Math.random();return r+=.618033988749895,r%=1,Math.floor(e[0]+r*(e[1]+1-e[0]))}var n=e[1]||1,l=e[0]||0,a=(t=(9301*t+49297)%233280)/233280;return Math.floor(l+a*(n-l))}function i(t,r,n){var l=n[0][0],a=n[n.length-1][0],i=n[n.length-1][1],s=n[0][1];e[t]={hueRange:r,lowerBounds:n,saturationRange:[l,a],brightnessRange:[i,s]}}function s(t){var e=t[0];0===e&&(e=1),360===e&&(e=359),e/=360;var r=t[1]/100,n=t[2]/100,l=Math.floor(6*e),a=6*e-l,i=n*(1-r),s=n*(1-a*r),o=n*(1-(1-a)*r),h=256,u=256,f=256;switch(l){case 0:h=n,u=o,f=i;break;case 1:h=s,u=n,f=i;break;case 2:h=i,u=n,f=o;break;case 3:h=i,u=s,f=n;break;case 4:h=o,u=i,f=n;break;case 5:h=n,u=i,f=s}return[Math.floor(255*h),Math.floor(255*u),Math.floor(255*f)]}function o(t){t=3===(t=t.replace(/^#/,"")).length?t.replace(/(.)/g,"$1$1"):t;var e=parseInt(t.substr(0,2),16)/255,r=parseInt(t.substr(2,2),16)/255,n=parseInt(t.substr(4,2),16)/255,l=Math.max(e,r,n),a=l-Math.min(e,r,n),i=l?a/l:0;switch(l){case e:return[(r-n)/a%6*60||0,i,l];case r:return[60*((n-e)/a+2)||0,i,l];case n:return[60*((e-r)/a+4)||0,i,l]}}function h(t){var e=t[0],r=t[1]/100,n=t[2]/100,l=(2-r)*n;return[e,Math.round(r*n/(l<1?l:2-l)*1e4)/100,l/2*100]}return n}(),t&&t.exports&&(e=t.exports=r),e.randomColor=r}).call(this,r(1)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";r.r(e);class n{constructor(t){this.height=t.length,this.width=t[0].length,this.data=new Array(this.height),this.flipData=new Array(this.height),this.spinDataArrays=new Array,this.flipDataArrays=new Array,this.allDataArrays=new Array,this.area=0;for(let e=0;e<this.height;e++){this.data[e]=new Array(this.width),this.flipData[e]=new Array(this.width);for(let r=0;r<this.width;r++)this.data[e][r]=t[e][r],this.flipData[e][this.width-1-r]=t[e][r]," "!=t[e][r]&&this.area++}this.spinDataArrays.push(this.data.slice(0)),this.spinDataArrays.push(this.generateRotate90(this.data)),this.spinDataArrays.push(this.generateRotate180(this.data)),this.spinDataArrays.push(this.generateRotate270(this.data)),this.flipDataArrays.push(this.flipData.slice(0)),this.flipDataArrays.push(this.generateRotate90(this.flipData)),this.spinDataArrays.push(this.generateRotate180(this.flipData)),this.spinDataArrays.push(this.generateRotate270(this.flipData));for(let t=0;t<this.spinDataArrays.length;t++)for(let e=t+1;e<this.spinDataArrays.length;e++)this.equalData(this.spinDataArrays[t],this.spinDataArrays[e])&&(this.spinDataArrays.splice(e,1),e--);for(let t=0;t<this.flipDataArrays.length;t++)for(let e=t+1;e<this.flipDataArrays.length;e++)this.equalData(this.flipDataArrays[t],this.flipDataArrays[e])&&(this.flipDataArrays.splice(e,1),e--);for(let t=0;t<this.flipDataArrays.length;t++)this.allDataArrays.push(this.flipDataArrays[t]);for(let t=0;t<this.spinDataArrays.length;t++)this.allDataArrays.push(this.spinDataArrays[t]);for(let t=0;t<this.allDataArrays.length;t++)for(let e=t+1;e<this.allDataArrays.length;e++)this.equalData(this.allDataArrays[t],this.allDataArrays[e])&&(this.allDataArrays.splice(e,1),e--)}getArea(){return this.area}equal(t){if(t.area!=this.area)return!1;if(t.dat.length!=this.data.length)return!1;for(let e=0;e<this.data.length;e++)if(!this.arraysEqual(data[e],t.data[e]))return!1;return!0}equalData(t,e){if(t.length!=e.length||t[0].length!=e[0].length)return!1;for(let r=0;r<t.length;r++)if(!this.arraysEqual(t[r],e[r]))return!1;return!0}equalSpin(t){if(t.area!=this.area)return!1;for(let e=0;e<this.spinDataArrays.length;e++)if(this.equalData(spinDataArrays[e],t.spinDataArrays[0]))return!0;return!1}equalFlip(t){if(t.area!=this.area)return!1;for(let e=0;e<this.flipDataArrays.length;e++)if(this.equalData(flipDataArrays[e],t.flipDataArrays[0]))return!0;return!1}arraysEqual(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!=e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}generateRotate90(t){let e=[];for(let t=0;t<this.width;t++)e.push(new Array(this.height));for(let r=0;r<this.height;r++)for(let n=0;n<this.width;n++)e[n][this.height-r-1]=t[r][n];return e}generateRotate180(t){let e=[];for(let r=0;r<this.height;r++){e.push(new Array(this.width));for(let n=0;n<this.width;n++)e[r][n]=t[this.height-r-1][this.width-n-1]}return e}generateRotate270(t){let e=[];for(let t=0;t<this.width;t++)e.push(new Array(this.height));for(let r=0;r<this.height;r++)for(let n=0;n<this.width;n++)e[this.width-n-1][r]=t[r][n];return e}}class l{constructor(t){this.fileContent=[],this.leftMost=Number.MAX_SAFE_INTEGER,this.upMost=Number.MAX_SAFE_INTEGER,this.rightMost=Number.MIN_SAFE_INTEGER,this.downMost=Number.MIN_SAFE_INTEGER,this.tiles=[],this.board=null,console.log(t);var e=t.split(/\r?\n/),r=0;for(let t=0;t<e.length;t++)e[t].length>r&&(r=e[t].length);for(let t=0;t<e.length;t++)e[t]=e[t]+" ".repeat(r-e[t].length);console.log(e);for(let t=0;t<e.length;t++){this.fileContent.push(new Array(r));for(let n=0;n<r;n++)this.fileContent[t][n]=e[t].charAt(n)}let l=e.length,a=r,i=[];for(var s=0;s<9;s++){i[s]=[];for(var o=0;o<9;o++)i[s][o]=!1}for(let t=0;t<l;t++)i.push(new Array(a));console.log(this.fileContent);for(let t=0;t<l;t++)for(let e=0;e<a;e++)if(" "!=this.fileContent[t][e]){if(!i[t][e]){this.find(this.fileContent,i,t,e);let r=this.rightMost-this.leftMost+1,l=this.downMost-this.upMost+1,a=[];for(let t=0;t<l;t++){a.push(new Array(r));for(let e=0;e<r;e++)a[t][e]=this.fileContent[this.upMost+t][this.leftMost+e]}console.log(a);var h=new n(a);this.tiles.push(h),this.leftMost=Number.MAX_SAFE_INTEGER,this.upMost=Number.MAX_SAFE_INTEGER,this.rightMost=Number.MIN_SAFE_INTEGER,this.downMost=Number.MIN_SAFE_INTEGER}}else i[t][e]=!0;let u=0,f=0;for(let t=0;t<this.tiles.length;t++)this.tiles[t].getArea()>f&&(f=this.tiles[t].getArea(),u=t);this.board=this.tiles[u],this.tiles.splice(u,1),console.log("tiles:");for(let t=0;t<this.tiles.length;t++)console.log(this.tiles[t].allDataArrays)}find(t,e,r,n){r<0||n<0||r>=t.length||n>=t[0].length||e[r][n]||" "!=t[r][n]&&(n>this.rightMost&&(this.rightMost=n),n<this.leftMost&&(this.leftMost=n),r>this.downMost&&(this.downMost=r),r<this.upMost&&(this.upMost=r),e[r][n]=!0,this.find(t,e,r-1,n),this.find(t,e,r+1,n),this.find(t,e,r,n-1),this.find(t,e,r,n+1))}getTiles(){return this.tiles}getBoard(){return this.board}}class a{constructor(t,e,r,n){let l=new Array;this.tileNum=t.length,this.columnNum=e.area+t.length,this.boardidx=new Array,this.buildBoardIdxArray(e);for(let a=0;a<t.length;a++){let i=t[a];if(n)for(let r=0;r<i.allDataArrays.length;r++)this.check(i.allDataArrays[r],e.data,l,a,t.length);else if(r)for(let r=0;r<i.spinDataArrays.length;r++)this.check(i.spinDataArrays[r],e.data,l,t.length);else this.check(i.data,e.data,l,a,t.length)}this.coverArray=[];for(let t=0;t<l.length;t++){let e=l[t];this.coverArray.push(new Array(l[0].length)),this.coverArray[t].fill(0);for(let r=0;r<e.length;r++)1==e[r]&&(this.coverArray[t][r]=1)}console.log(this.coverArray),this.rowNum=this.coverArray.length}buildBoardIdxArray(t){let e=0;for(let e=0;e<t.data.length;e++)this.boardidx.push(new Array(t.data[0].length));for(let r=0;r<t.data.length;r++)for(let n=0;n<t.data[0].length;n++)" "!=t.data[r][n]?this.boardidx[r][n]=e++:this.boardidx[r][n]=-1}check(t,e,r,n,l){let a=t.length,i=e.length,s=t[0].length,o=e[0].length;for(let h=0;h<i-a+1;h++)for(let i=0;i<o-s+1;i++)if(this.isValid(t,e,h,i)){let e=new Array(this.columnNum);e.fill(0),e[n]=1;for(let r=0;r<a;r++)for(let n=0;n<s;n++)" "!=t[r][n]&&(e[l+this.boardidx[h+r][i+n]]=1);r.push(e)}}isValid(t,e,r,n){let l=t.length,a=t[0].length;for(let i=0;i<l;i++)for(let l=0;l<a;l++)if(" "!=t[i][l]&&e[r+i][n+l]!=t[i][l])return!1;return!0}}class i{constructor(){this.left=null,this.right=null,this.up=null,this.down=null,this.row=null,this.col=null,this.head=null}}class s extends i{constructor(){super(),this.size=0,this.left=null,this.right=null,this.name=null,this.id=null}}class o{constructor(t){this.coverArray=t.coverArray,this.tileNum=t.tileNum,this.columnNodes=[],this.nodes=[];for(let e=0;e<t.rowNum;e++)this.nodes.push(new Array(t.columnNum));this.h=new s;for(let e=0;e<t.columnNum;e++){let r=new s;r.down=r,r.up=r,r.row=-1,r.col=e,0==e?(r.left=this.h,this.h.right=r):e!=t.columnNum-1?(r.left=this.columnNodes[e-1],this.columnNodes[e-1].right=r):(this.columnNodes[e-1].right=r,r.left=this.columnNodes[e-1],r.right=this.h,this.h.left=r),this.columnNodes.push(r)}for(let e=0;e<t.columnNum;e++){let r=0;for(let n=0;n<t.rowNum;n++)if(1==t.coverArray[n][e]){let t=new i;this.nodes[n][e]=t,t.row=n,t.col=e,r++}else this.nodes[n][e]=null;this.columnNodes[e].size=r}for(let e=0;e<t.rowNum;e++){let r=null,n=null;for(let l=0;l<t.columnNum;l++){if(null==this.nodes[e][l])continue;let t=this.nodes[e][l];null==n?(n=t,r=t):(t.left=r,r.right=t,r=t)}r.right=n,n.left=r}for(let e=0;e<t.columnNum;e++){let r=null,n=this.columnNodes[e],l=n;for(let a=0;a<t.rowNum;a++)null!=this.nodes[a][e]&&(l=this.nodes[a][e],l.head=n,null==r?(l.up=n,n.down=l):(l.up=r,r.down=l),r=l);l.down=n,n.up=l}}}class h{constructor(t,e,r){this.board=t.board,this.tiles=t.tiles,this.coverArray=e,this.linkArray=r,this.stack=[],this.solution=[],this.result=[],this.level=0,this.endTime=0,this.firstTime=!0}generateSolution(t){let e=new Array(this.solution.length),r=this.solution.slice(0),n=[];for(let t=0;t<this.board.data.length;t++)n.push(new Array(this.board.data[0].length));for(let t=0;t<n.length;t++)for(let e=0;e<n[0].length;e++)n[t][e]=" ";for(let t=e.length-1;t>=0;t--)e[t]=r.pop();for(const t of e){let e=this.coverArray.coverArray[t.row],r=0;for(let t=0;t<this.tiles.length;t++)if(1==e[t]){r=t;break}for(let t=this.tiles.length;t<e.length;t++)if(1==e[t]){let e=t-this.tiles.length;for(let t=0;t<this.coverArray.boardidx.length;t++)for(let l=0;l<this.coverArray.boardidx[0].length;l++)this.coverArray.boardidx[t][l]==e&&(n[t][l]=r)}}return n}putSolution(t,e){if(e){let e=new n(t),r=e.allDataArrays;for(let t=0;t<this.result.length;t++)for(let n=0;n<r.length;n++)if(e.equalData(this.result[t],r[n]))return}this.result.push(t)}solve(t,e){if(this.level++,t.h.right==t.h||t.h.left.col<t.tileNum){let t=this.generateSolution(this.solution);return void this.putSolution(t,e)}let r=this.findStartColumn(t);this.cover(r);for(let n=r.down;n!=r;n=n.down){this.solution.push(n);for(let t=n.right;t!=n;t=t.right)this.cover(t.head);this.solve(t,e),n=this.solution.pop(),r=n.head;for(let t=n.left;t!=n;t=t.left)this.uncover(t.head)}this.uncover(r),this.level--}cover(t){t.left.right=t.right,t.right.left=t.left;for(let e=t.down;e!=t;e=e.down)for(let t=e.right;t!=e;t=t.right)t.up.down=t.down,t.down.up=t.up,t.head.size--}uncover(t){for(let e=t.up;e!=t;e=e.up)for(let t=e.left;t!=e;t=t.left)t.up.down=t,t.down.up=t,t.head.size++;t.right.left=t,t.left.right=t}findStartColumn(t){let e=t.h,r=Number.MAX_SAFE_INTEGER,n=e,l=e.right,a=this.board.getArea(),i=0;for(let t=0;t<this.tiles.length;t++)i+=this.tiles[t].getArea();for(;l!=e;)i>a&&l.col<this.tiles.length||l.size<r&&(r=l.size,n=l),l=l.right;return n}nextNChar(t,e){return String.fromCharCode(t.charCodeAt(0)+e)}}document.getElementById("tileFile").addEventListener("change",(function(){const t=this.files[0],e=new FileReader;e.onload=t=>{u=t.target.result;let e=new l(u);f=e.getTiles();let r=e.getBoard(),n=new a(f,r,!0,!0),i=new o(n);c=new h(e,n,i),function(t){t.data[0].length<5?document.getElementById("page").setAttribute("data-size","5"):t.data[0].length>10?document.getElementById("page").setAttribute("data-size","10"):document.getElementById("page").setAttribute("data-size",""+t.data[0].length);let e=document.getElementById("game");e.innerHTML="";let r=document.createElement("table"),n=document.createElement("tbody");for(let e=0;e<t.data.length;e++){let r=document.createElement("tr");for(let n=0;n<t.data[0].length;n++)if(" "==t.data[e][n]){let t=document.createElement("td");t.setAttribute("style","border:0px"),t.append(document.createElement("div")),r.append(t)}else{let t=document.createElement("td");t.append(document.createElement("div")),t.setAttribute("bgcolor","#C0C0C0"),t.setAttribute("data-combo","10"),t.setAttribute("data-status","1"),r.append(t)}n.append(r)}r.append(n),e.append(r)}(r),d=c.result,console.log(d)},e.onerror=t=>reject(t),e.readAsText(t)}),!1),document.getElementById("solve").addEventListener("click",(function(){c.solve(c.linkArray,!0);let t=document.getElementById("total"),e=document.getElementById("cur");t.innerHTML=c.result.length,e.innerHTML=0,p(c.result[0])})),document.getElementById("next").addEventListener("click",(function(){let t=document.getElementById("cur");t.innerHTML=Number(t.innerHTML)+1,p(c.result[Number(t.innerHTML)])})),document.getElementById("prev").addEventListener("click",(function(){let t=document.getElementById("cur");t.innerHTML=Number(t.innerHTML)-1,p(c.result[Number(t.innerHTML)])}));var u="",f=[],d=null;let c=null;var g=["#FFE082","#FF8A65","#AED581","#81D4FA","#A1887F"];function p(t){console.log("Solution:"),console.log(t);var e=r(0),n=f.length,l=g.length;if(l<f.length){for(let t=0;t<l;t++){var a=e({count:Math.ceil(1*n/l),hue:g[t]});g.push.apply(g,a)}!function(t){var e,r,n=t.length;for(;0!==n;)r=Math.floor(Math.random()*n),e=t[n-=1],t[n]=t[r],t[r]=e}(g)}let i=document.getElementById("game");i.innerHTML="";let s=document.createElement("table"),o=document.createElement("tbody");for(let e=0;e<t.length;e++){let r=document.createElement("tr");for(let n=0;n<t[0].length;n++)if(" "===t[e][n]){console.log(t[e][n]);let l=document.createElement("td");l.setAttribute("style","border:0px"),l.append(document.createElement("div")),r.append(l)}else{console.log(t[e][n]);let l=document.createElement("td");l.append(document.createElement("div")),l.setAttribute("bgcolor",g[t[e][n]]),l.setAttribute("data-combo","10"),l.setAttribute("data-status","1"),r.append(l)}o.append(r)}s.append(o),i.append(s)}}]);